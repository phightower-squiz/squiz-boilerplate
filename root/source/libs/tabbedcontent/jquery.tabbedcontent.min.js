/*
 * Tabs plugin for jQuery created by Òscar Casajuana < elboletaire at underave dot net > 
 * 
 * Copyright 2013 Òscar Casajuana
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Change Log: 20 May 2013 - Altered by Anthony Barnes to control the init() push state behaviour.
 */(function(e,t,n,r){"use strict";var i=function(i,s){function c(e){return a.filter(e).length?!0:!1}function h(e){return e.toString().match(/^[0-9]$/)?"#"+a.eq(e).attr("id"):"#"+e}function p(e){u&&f!==r&&"pushState"in f&&(u=!1,s.pushStateOnInit&&n.setTimeout(function(){f.replaceState(null,"",e)},100)),s.onSwitch&&typeof s.onSwitch=="function"&&s.onSwitch(e)}function d(e,t){return e.toString().match(/^#/)||(e=h(e)),c(e)?(s.links.removeClass(s.currentClass),s.links.filter("a[href="+e+"]").addClass(s.currentClass),a.hide(),t&&(f!==r&&"pushState"in f?f.pushState(null,"",e):n.location.hash=e),a.filter(e).show(s.speed,function(){s.speed&&p(e)}),s.speed||p(e),!0):!1}function v(e){return d(e,!0)}function m(e){c(l.hash)&&d(l.hash)}function g(){c(l.hash)?d(l.hash):s.errorSelector&&a.find(s.errorSelector).length?a.each(function(){if(e(this).find(s.errorSelector).length)return d("#"+e(this).attr("id")),!1}):d("#"+i.children(":first-child").attr("id"));if("onhashchange"in n)e(n).bind("hashchange",m);else{var t=l.href;n.setInterval(function(){t!==l.href&&(m.call(n.event),t=l.href)},100)}s.onInit&&typeof s.onInit=="function"&&s.onInit()}var o={links:i.prev().find("a").length?i.prev().find("a"):".tabs a",errorSelector:".error-message",speed:!1,onSwitch:!1,onInit:!1,currentClass:"current",pushStateOnInit:!1},u=!0,a=i.children(),f=n.history,l=t.location;return s=e.extend(o,s),s.links.version||(s.links=e(s.links)),g(),{"switch":v,switchTab:v}};e.fn.tabbedContent=function(t){return this.each(function(){var n=new i(e(this),t);e(this).data("api",n)})}})(jQuery,document,window);